<!-- templates/dashboard/test_parsing.html -->
{% extends 'base.html' %}

{% block content %}
<div class="container">
    <h1>Тестирование парсинга онлайн данных</h1>

    {% if test_results %}
    <h3>Результаты парсинга:</h3>

    {% for vehicle_id, result in test_results.items %}
    <div class="card mb-4">
        <div class="card-header">
            <h4>ТС ID: {{ vehicle_id }}</h4>
        </div>
        <div class="card-body">
            <h5>Сырые данные:</h5>
            <pre>{{ result.raw_data|pprint }}</pre>

            <h5>Распарсенные данные:</h5>
            {% if result.parsed_data %}
                <pre>{{ result.parsed_data|pprint }}</pre>
            {% else %}
                <div class="text-danger">❌ Не удалось распарсить данные</div>
            {% endif %}
        </div>
    </div>
    {% endfor %}
    {% endif %}

    {% if error %}
    <div class="alert alert-danger">{{ error }}</div>
    {% endif %}
</div>
{% endblock %}