<!-- templates/dashboard/debug_fuel_parsing.html -->
{% extends 'base.html' %}

{% block content %}
<div class="container">
    <h1>Отладка парсинга топлива</h1>

    {% if parsing_results %}
    <h3>Результаты парсинга:</h3>

    {% for vehicle_id, result in parsing_results.items %}
    <div class="card mb-4">
        <div class="card-header">
            <h4>ТС ID: {{ vehicle_id }}</h4>
        </div>
        <div class="card-body">
            <h5>Сырые данные Final:</h5>
            <pre>{{ result.raw_final|pprint }}</pre>

            <h5>Распарсенное топливо:</h5>
            {% if result.parsed_fuel is not None %}
                <div class="alert alert-success">
                    ✅ Топливо: <strong>{{ result.parsed_fuel }} л</strong>
                </div>
            {% else %}
                <div class="alert alert-danger">
                    ❌ Топливо не найдено
                </div>
            {% endif %}
        </div>
    </div>
    {% endfor %}
    {% endif %}

    {% if online_info_sample %}
    <h3>Сырые данные онлайн информации:</h3>
    <pre>{{ online_info_sample|pprint }}</pre>
    {% endif %}

    {% if error %}
    <div class="alert alert-danger">{{ error }}</div>
    {% endif %}
</div>
{% endblock %}